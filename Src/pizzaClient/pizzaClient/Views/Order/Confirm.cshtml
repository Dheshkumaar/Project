@model pizzaClient.Models.Order

@{
    ViewData["Title"] = "Confirm";
    var pizzaId = TempData["pizzaId"];
}

<head>
    <style>
        body {
            background-image: url(/image.jpg);
            height: 700px;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
            position: relative;
        }
    </style>
</head>
<div class="bg-white m-4 p-4 rounded">
    <h4 class="text-center">Confirm Details</h4>
    <p class="text-center text-danger">(Once order placed cannot be Cancelled)</p>
    <hr />
    <form asp-action="SaveOrder" name="ConfirmOrder">
        <dl class="row">
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.CustomerName)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.CustomerName)
                @Html.HiddenFor(model => model.CustomerName)
            </dd>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.CustomerPhone)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.CustomerPhone)
                @Html.HiddenFor(model => model.CustomerPhone)
            </dd>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.Address)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.Address)
                @Html.HiddenFor(model => model.Address)
            </dd>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.Amount)
            </dt>
            <dd class="col-sm-10">
                &#x20B9;@Html.DisplayFor(model => model.Amount)
                @Html.HiddenFor(model => model.Amount)
            </dd>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.DeliveryDate)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.DeliveryDate)
                @Html.HiddenFor(model => model.DeliveryDate)
            </dd>
        </dl>
        @Html.HiddenFor(model => model.AlterOrder)
        <div class="row">
            <div class="col-sm-12">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>Pizza Name</th>
                            <th>Pizza Price</th>
                            <th>Quantity</th>
                            <th>Toppings</th>
                            <th>Crust Type</th>
                        </tr>
                    </thead>
                    <tbody>
                        @{
                            for (var i = 0; i < Model.orderDetails.Count; i++)
                            {
                                <tr id="orderDetails">
                                    @Html.HiddenFor(m => m.orderDetails[i].pizzaId)
                                    <td>
                                        @Model.orderDetails[i].PizzaName
                                        @Html.HiddenFor(m => m.orderDetails[i].PizzaName)
                                    </td>
                                    <td>
                                        &#x20B9;@Model.orderDetails[i].Price
                                        @Html.HiddenFor(m => m.orderDetails[i].Price)
                                    </td>
                                    <td>
                                        @Model.orderDetails[i].Quantity
                                        @Html.HiddenFor(m => m.orderDetails[i].Quantity)
                                    </td>
                                    <td>
                                        @Model.orderDetails[i].Toppings
                                        @Html.HiddenFor(m=>m.orderDetails[i].Toppings)
                                    </td>
                                    <td>
                                        @Model.orderDetails[i].CrustType
                                        @Html.HiddenFor(m=>m.orderDetails[i].CrustType)
                                    </td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
            </div>
        </div>

        <div class="form-group text-center">
            <input type="submit" value="Confirm Order" class="btn btn-primary rounded" />
            <input type="button" value="Alter Order" class="btn btn-outline-success rounded" onclick="alter();" >
            <input type="button" class="btn btn-danger rounded" value="Cancel Order" onclick="location.href='@Url.Action("Index", "Pizza")'" />
        </div>
    </form>
</div>

<script>
    function alter() {
        var form = document.forms["ConfirmOrder"];
        form.AlterOrder.value = true;
        form.submit();
    }
</script>

